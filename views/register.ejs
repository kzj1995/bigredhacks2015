<% include _header %>
<%
var en = enums.user;
var errors = errors || []; //form errors
var error = error || []; //misc errors flash
var input = input || {}; //persist fields
var helper = viewHelper;
%>
<%
//form validation errors
if (errors.length > 0) {
    for (var i = 0; i < errors.length; i++) {
        errors[i] = '<div class="alert alert-danger" role="alert">' + errors[i].msg + '</div>'
    }
}
else errors = [];

//generic flash error
if (error.length > 0) {
    error = '<div class="alert alert-danger" role="alert">' + error[0] + '</div>';
}
%>

<div class="container" style="overflow-x:hidden;">
    <%- error %>
    <%- errors.join(""); %>
    <h1>Registration</h1>

    <form id="registrationForm" action="/register" name='registrationForm' method="POST" autocomplete="on"
          enctype="multipart/form-data">
        <fieldset>
            <div class="header-wrapper"><legend class="page-title">account information</legend></div>
            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" class="form-control" placeholder="bigredhacks@example.com"
                       value="<%= input.email || "" %>" required/>
            </div>
            <div class="form-group">
                <label for="password">Password *</label>
                <input type="password" id="password" name="password" class="form-control" placeholder="Password"
                       required/>
            </div>
            <div class="form-group">
                <label for="confirmpassword">Confirm Password *</label>
                <input type="password" id="confirmpassword" name="confirmpassword" class="form-control"
                       placeholder="Password"
                       required/>
            </div>
        </fieldset>
        <br/>
        <fieldset>
            <div class="header-wrapper"><legend class="page-title">basic information</legend></div>
            <div class="form-group">
                <label for="firstname">First Name *</label>
                <input type="text" id="firstname" name="firstname" minlength="2" class="form-control"
                       placeholder="First Name"
                       value="<%= input.firstname || "" %>" required/>
            </div>
            <div class="form-group">
                <label for="lastname">Last Name *</label>
                <input type="text" id="lastname" name="lastname" minlength="2" class="form-control"
                       placeholder="Last Name"
                       value="<%= input.lastname || "" %>" required/>
            </div>
            <div class="form-group">
                <label for="phonenumber">Phone Number *</label>
                <input type="text" id="phonenumber" name="phonenumber" class="form-control" placeholder="XXX-XXX-XXXX"
                       value="<%= input.phonenumber || "" %>" required/>
            </div>
            <div class="form-group">
                <label for="genderDropdown">Gender *</label>
                <select class="form-control" id="genderDropdown" name="genderDropdown" required>
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.gender, {selected: (input.genderDropdown || "")}); %>
                </select>
            </div>
        </fieldset>
        <br/>
        <fieldset>
            <div class="header-wrapper"><legend class="page-title">school</legend></div>

            <input type="hidden" id="collegeid" name="collegeid" class="form-control"
                   value="<%= input.collegeid || "" %>" required/>

            <div class="form-group">
                <label for="college">Full School Name *</label><br/>
                <input type="text" id="college" name="college" class="form-control typeahead" placeholder="School Name"
                       value="<%= input.college || "" %>" required/>
            </div>
            <div class="form-group">
                <label for="yearDropdown">Graduation Year *</label>
                <select class="form-control" id="yearDropdown" name="yearDropdown" required>
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.year, {selected: (input.yearDropdown || "")}); %>
                </select>
            </div>
            <div class="form-group">
                <label for="major">Major *</label>
                <input type="text" id="major" name="major" class="form-control" placeholder="Major"
                       value="<%= input.major || "" %>" required/>
            </div>
        </fieldset>
        <br/>
        <fieldset>
            <div class="header-wrapper"><legend class="page-title">background</legend></div>
            <div class="form-group">
                <label for="resume">Resume (PDF) *</label>
                <div class="wrapper">
                    <input data-label="Upload" class="form-control filepicker-bootstrap" type="file" id="resume"
                           name="resume" accept=".pdf" required>
                </div>
            </div>
            <div class="form-group">
                <label>Essay Question 1 *</label>
                <textarea id="q1" name="q1" class="form-control" rows="4" required><%= input.q1 || "" %></textarea>
            </div>
            <div class="form-group">
                <label>Essay Question 2 *</label>
                <textarea id="q2" name="q2" class="form-control" rows="4" required><%= input.q2 || "" %></textarea>
            </div>
            <div class="form-group">
                <label for="github">Github Profile </label>

                <div class="input-group">
                    <div class="input-group-addon">@</div>
                    <input type="text" class="form-control" id="github" name="github" placeholder="johndoe"
                           value="<%= input.github || "" %>">
                </div>
            </div>
            <div class="form-group">
                <label for="linkedin">LinkedIn Profile</label>

                <div class="input-group">
                    <div class="input-group-addon">http://</div>
                    <input type="text" class="form-control" id="linkedin" name="linkedin"
                           placeholder="www.linkedin.com/" value="<%= input.linkedin || "" %>">
                </div>
            </div>
            <div class="form-group">
                <label for="experienceDropdown">Is this your first Hackathon?</label>
                <select class="form-control" id="experienceDropdown" name="experienceDropdown">
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.experience, {selected: (input.experienceDropdown || "")}); %>
                </select>
            </div>
        </fieldset>
        <br/>
        <fieldset>
            <div class="header-wrapper"><legend class="page-title">preferences</legend></div>
            <div class="form-group">
                <label for="projectDropdown">What type of project are you thinking about working on?</label>
                <select class="form-control" id="projectDropdown" name="projectDropdown">
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.project, {selected: (input.projectDropdown || "")}); %>
                </select>
            </div>
            <div class="form-group">
                <label for="dietary">Dietary Restrictions *</label>
                <select class="form-control" id="dietary" name="dietary" required>
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.dietary, {selected: (input.dietary || "")}); %>
                </select>
            </div>
            <div class="form-group">
                <label for="tshirt">T-Shirt Size *</label>
                <select class="form-control" id="tshirt" name="tshirt" required>
                    <option value="">Select</option>
                    <%- helper.generateOptions(en.tshirt, {selected: (input.tshirt || "")}); %>
                </select>
            </div>
        </fieldset>

        <button type="submit" id="submit" class="btn btn-primary">Submit</button>

    </form>
</div>

<script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
<script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/additional-methods.min.js"></script>
<script src="/js/vendor/typeahead.bundle.min.js"></script>
<script src="/js/vendor/jquery.filepicker.min.js"></script>
<script src="/js/register.js"></script>
<% include _footer %>
